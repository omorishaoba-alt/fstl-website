<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FSTL AI Paid Verification</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- jsPDF CDN for PDF receipts -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body { font-family: Arial, sans-serif; margin:0; background:#f5f5f5; color:#111; }
nav { background:#000; padding:15px; position:sticky; top:0; }
nav a { color:#fff; margin-right:15px; text-decoration:none; font-weight:bold; }
section { padding:40px 20px; background:#fff; margin-bottom:10px; }
input, button { width:100%; padding:12px; margin-top:10px; font-size:16px; }
button { background:#000; color:#fff; border:none; cursor:pointer; }
#result { margin-top:20px; padding:20px; background:#eee; }
footer { background:#000; color:#fff; text-align:center; padding:20px; font-size:14px; }
label { font-weight:bold; margin-top:10px; display:block; }
</style>
</head>
<body>

<nav>
  <a href="index.html">Home</a>
  <a href="search.html">AI Search</a>
  <a href="verify.html">Verify</a>
  <a href="agents.html">Agents</a>
  <a href="payment.html">Payments</a>
</nav>

<section>
<h2>FSTL AI Paid Verification</h2>
<p>Enter your details to instantly verify a transaction and download a bank-backed digital receipt.</p>

<label for="refID">Reference ID (FSTL-REF-XXXX)</label>
<input type="text" id="refID" placeholder="FSTL-REF-XXXX">

<label for="agentID">Agent ID (FSTL-AGENT-XXXX)</label>
<input type="text" id="agentID" placeholder="FSTL-AGENT-XXXX">

<label for="buyerName">Buyer Full Name</label>
<input type="text" id="buyerName" placeholder="John Doe">

<label for="paymentRef">Last 4 Digits of Payment Reference</label>
<input type="text" id="paymentRef" placeholder="XXXX">

<button onclick="startVerification()">Submit & Verify</button>

<div id="result"></div>
</section>

<script>
async function startVerification() {
  const ref = document.getElementById('refID').value.trim();
  const agent = document.getElementById('agentID').value.trim();
  const buyer = document.getElementById('buyerName').value.trim();
  const payRef = document.getElementById('paymentRef').value.trim();
  const resultDiv = document.getElementById('result');

  if(!ref || !agent || !buyer || !payRef) {
    alert('Please fill all fields');
    return;
  }

  resultDiv.innerHTML = 'üîí FSTL AI is verifying transaction...';

  await new Promise(r => setTimeout(r, 2000)); // Simulate AI + bank verification

  const verificationSuccess = true; // Placeholder for real backend

  if(verificationSuccess) {
    resultDiv.innerHTML = `
      ‚úÖ Transaction Verified!<br>
      <strong>Reference ID:</strong> ${ref}<br>
      <strong>Agent ID:</strong> ${agent}<br>
      <strong>Buyer Name:</strong> ${buyer}<br>
      <strong>Payment Reference:</strong> ${payRef}<br>
      üí∞ Payment confirmed to FSTL bank account<br>
      <button onclick="downloadPDF('${ref}','${agent}','${buyer}','${payRef}')">Download Styled PDF Receipt</button>
    `;
  } else {
    resultDiv.innerHTML = '‚ùå Verification Failed. Check your Reference ID or Payment Reference.';
  }
}

function downloadPDF(ref, agent, buyer, payRef) {
  const { jsPDF } = window.jspdf;
  const doc = new jsPDF();

  // FSTL Branding
  doc.setFontSize(22);
  doc.setTextColor(0,0,128);
  doc.text("First Standard Title Limited (FSTL)", 20, 30);

  doc.setFontSize(16);
  doc.setTextColor(0,0,0);
  doc.text("Digital Verification Receipt", 20, 45);

  doc.setFontSize(12);
  doc.text(`Reference ID: ${ref}`, 20, 60);
  doc.text(`Agent ID: ${agent}`, 20, 68);
  doc.text(`Buyer Name: ${buyer}`, 20, 76);
  doc.text(`Payment Reference: ${payRef}`, 20, 84);
  doc.text(`Verified by: FSTL AI Layer`, 20, 92);
  doc.text(`Bank Confirmed: Yes`, 20, 100);
  doc.text(`Date: ${new Date().toLocaleString()}`, 20, 108);

  doc.setDrawColor(0,0,0);
  doc.line(20, 112, 190, 112);

  doc.setFontSize(10);
  doc.text("Thank you for using FSTL. This receipt is bank-backed and AI-verified.", 20, 120);

  doc.save(`${ref}-FSTL-Receipt.pdf`);
}
</script>

<footer>
¬© First Standard Title Limited (FSTL) ‚Äì The Redeemer of Shadows & Guardian of Truth
</footer>

</body>
</html>
