<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>FSTL Verification Search</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{font-family:Arial;background:#f5f5f5;padding:20px}
.box{background:#fff;padding:20px;max-width:500px;margin:auto}
input,button{width:100%;padding:10px;margin-top:10px}
button{background:#000;color:#fff;border:none}
.result{margin-top:15px;font-weight:bold}
</style>
</head>

<body>

<div class="box">
<h2>FSTL Verification</h2>

<input id="agent" placeholder="Agent ID">
<input id="buyer" placeholder="Buyer Name">
<input id="amount" placeholder="Amount">
<input id="date" placeholder="YYYY-MM-DD">
<input id="bankref" placeholder="Bank Reference">

<button onclick="verify()">Verify</button>

<div class="result" id="result"></div>
</div>

<script>
async function sha256(message) {
  const msgBuffer = new TextEncoder().encode(message);
  const hashBuffer = await crypto.subtle.digest('SHA-256', msgBuffer);
  const hashArray = Array.from(new Uint8Array(hashBuffer));
  return hashArray.map(b => b.toString(16).padStart(2, '0')).join('');
}

async function verify(){
  const agent = agent.value;
  const buyer = buyer.value;
  const amount = amount.value;
  const date = date.value;
  const bankref = bankref.value;

  const raw = `FSTL|${agent}|${buyer}|${amount}|${date}|${bankref}`;
  const hash = await sha256(raw);
  const code = `FSTL-${date.slice(2,4)}-${agent}-${hash.slice(0,8).toUpperCase()}`;

  document.getElementById("result").innerHTML =
    "VERIFICATION CODE:<br>" + code;
}
</script>

</body>
</html>
