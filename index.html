<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FSTL – Unified Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="FSTL Unified Portal – Retail & Institutional Verification, Agents, Payments, AI Search">
<style>
body{font-family:Arial,sans-serif;margin:0;background:#f5f5f5;color:#111;}
nav{background:#000;color:#fff;padding:12px;position:sticky;top:0;z-index:10;}
nav a{color:#fff;margin-right:12px;text-decoration:none;font-weight:bold;font-size:14px;}
section{background:#fff;margin:10px;padding:20px;border-radius:6px;}
h1,h2,h3{margin-top:0;}
input,button,select{width:100%;padding:10px;margin:6px 0;border-radius:4px;}
button{background:#000;color:#fff;border:none;cursor:pointer;}
.box{background:#eee;padding:15px;border-radius:4px;margin-top:10px;}
footer{background:#000;color:#fff;text-align:center;padding:15px;font-size:13px;}
pre{background:#ddd;padding:10px;border-radius:4px;}
</style>
</head>
<body>

<nav>
<a href="#home">Home</a>
<a href="#agent">Agent ID</a>
<a href="#verify">Verification</a>
<a href="#search">AI Search</a>
<a href="#payment">Payment</a>
<a href="#institution">Institution API</a>
</nav>

<!-- HOME -->
<section id="home">
<h1>FSTL – First Standard Title Limited</h1>
<div class="box">
Operating Principle:<br>
<strong>Input → Transaction → Output</strong><br>
Zero Infrastructure • Bank-Centric • Immediate Revenue • Silent Scale
</div>
</section>

<!-- AGENT ID -->
<section id="agent">
<h2>Agent Identification</h2>
<input id="agentName" placeholder="Agent Full Name">
<button onclick="generateAgent()">Generate Agent ID</button>
<div class="box" id="agentResult"></div>
</section>

<!-- TRANSACTION VERIFICATION -->
<section id="verify">
<h2>Transaction Verification</h2>
<input id="vAgent" placeholder="Agent ID">
<input id="vBuyer" placeholder="Buyer / Client Name">
<input id="vAmount" placeholder="Amount">
<input id="vBank" placeholder="Bank Reference">
<button onclick="generateVerification()">Generate Verification</button>
<div class="box" id="verificationResult"></div>
<div id="qr"></div>
<button onclick="generatePDF()">Download Receipt (PDF)</button>
</section>

<!-- AI SEARCH -->
<section id="search">
<h2>AI Verification Search</h2>
<input id="sAgent" placeholder="Agent ID">
<input id="sBuyer" placeholder="Buyer Name">
<input id="sAmount" placeholder="Amount">
<input id="sBank" placeholder="Bank Reference">
<button onclick="searchVerification()">Verify</button>
<div class="box" id="searchResult"></div>
</section>

<!-- DIRECT BANK PAYMENT -->
<section id="payment">
<h2>Direct Bank Payment</h2>
<div class="box">
Account Name: <strong>First Standard Title Limited</strong><br>
Bank: <em>[YOUR BANK]</em><br>
Account Number: <em>[XXXXXXX]</em><br>
Use Verification Code as narration
</div>
</section>

<!-- INSTITUTIONAL API -->
<section id="institution">
<h2>Institutional / Government API</h2>
<pre>
POST /verify
{
  agent_id,
  buyer,
  amount,
  bank_ref
}
RESPONSE:
{
  status: VERIFIED,
  verification_code,
  timestamp
}
</pre>

<h3>Live Verification (Simulated)</h3>
<input id="apiAgent" placeholder="Agent ID">
<input id="apiBuyer" placeholder="Buyer Name">
<input id="apiAmount" placeholder="Amount">
<input id="apiBankRef" placeholder="Bank Reference">
<button onclick="postVerifyAPI()">POST /verify</button>
<div class="box" id="apiResult"></div>
<p style="font-size:12px;color:#555;">Simulation runs entirely client-side. No servers required.</p>
</section>

<footer>
© FSTL • Unified Portal • Digital Trust & Verification
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<script>
// === Shared Logic ===
let currentVerification="";

// SHA256 helper
async function sha256(text){
 const data=new TextEncoder().encode(text);
 const hash=await crypto.subtle.digest("SHA-256",data);
 return Array.from(new Uint8Array(hash)).map(b=>b.toString(16).padStart(2,"0")).join("");
}

// Generate Agent ID
async function generateAgent(){
 const name=document.getElementById("agentName").value.trim();
 if(!name){document.getElementById("agentResult").innerText="Enter name";return;}
 const y=new Date().getFullYear();
 const h=await sha256(name+y);
 document.getElementById("agentResult").innerHTML="<strong>Agent ID:</strong> AG-"+y+"-"+h.slice(0,5).toUpperCase();
}

// Generate Transaction Verification
async function generateVerification(){
 const raw=`FSTL|${document.getElementById("vAgent").value}|${document.getElementById("vBuyer").value}|${document.getElementById("vAmount").value}|${document.getElementById("vBank").value}`;
 const h=await sha256(raw);
 currentVerification="FSTL-"+h.slice(0,10).toUpperCase();
 document.getElementById("verificationResult").innerHTML="<strong>Verification Code:</strong> "+currentVerification;
 generateQR(currentVerification);
}

// QR Code
function generateQR(text){
 document.getElementById("qr").innerHTML="";
 new QRCode(document.getElementById("qr"),{text:text,width:120,height:120});
}

// AI Search Verification
async function searchVerification(){
 const raw=`FSTL|${document.getElementById("sAgent").value}|${document.getElementById("sBuyer").value}|${document.getElementById("sAmount").value}|${document.getElementById("sBank").value}`;
 const h=await sha256(raw);
 document.getElementById("searchResult").innerHTML="<strong>Status:</strong> VERIFIED<br><strong>Reference:</strong> FSTL-"+h.slice(0,10).toUpperCase()+"<br><strong>Settlement:</strong> Bank Confirmed";
}

// PDF Receipt Generation
function generatePDF(){
 const {jsPDF}=window.jspdf;
 const pdf=new jsPDF();
 pdf.setFontSize(14);
 pdf.text("FIRST STANDARD TITLE LIMITED",20,20);
 pdf.text("Verification Receipt",20,30);
 pdf.text("Agent ID: "+document.getElementById("vAgent").value,20,45);
 pdf.text("Buyer: "+document.getElementById("vBuyer").value,20,55);
 pdf.text("Amount: "+document.getElementById("vAmount").value,20,65);
 pdf.text("Bank Ref: "+document.getElementById("vBank").value,20,75);
 pdf.text("Verification Code:",20,90);
 pdf.text(currentVerification,20,100);
 pdf.save("FSTL-Receipt.pdf");
}

// === Institutional API Simulation ===
async function simulateAPI(data){
    if(!data.agent_id || !data.buyer || !data.amount || !data.bank_ref){
        return {status:"ERROR", message:"Missing field"};
    }
    const raw=`FSTL|${data.agent_id}|${data.buyer}|${data.amount}|${data.bank_ref}`;
    const hashBuffer = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(raw));
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map(b=>b.toString(16).padStart(2,'0')).join('');
    const verification_code="FSTL-"+hashHex.slice(0,10).toUpperCase();
    const timestamp = new Date().toISOString();
    return {status:"VERIFIED", verification_code, timestamp};
}

function postVerifyAPI(){
 const agent_id=document.getElementById("apiAgent").value;
 const buyer=document.getElementById("apiBuyer").value;
 const amount=document.getElementById("apiAmount").value;
 const bank_ref=document.getElementById("apiBankRef").value;

 simulateAPI({agent_id,buyer,amount,bank_ref})
 .then(res=>{
  document.getElementById("apiResult").innerHTML=`<pre>${JSON.stringify(res,null,2)}</pre>`;
 });
}
</script>
</body>
</html>
