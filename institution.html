<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FSTL – Institutional Portal</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="FSTL Institutional Verification, Bulk API access">
<style>
body{font-family:Arial,sans-serif;margin:0;background:#f4f4f4;color:#111;}
nav{background:#000;color:#fff;padding:12px;position:sticky;top:0;z-index:10;}
nav a{color:#fff;margin-right:12px;text-decoration:none;font-weight:bold;font-size:14px;}
section{background:#fff;margin:10px;padding:20px;border-radius:6px;}
h1,h2,h3{margin-top:0;}
input,button{width:100%;padding:10px;margin:6px 0;}
button{background:#000;color:#fff;border:none;cursor:pointer;}
.box{background:#eee;padding:15px;border-radius:4px;margin-top:10px;}
footer{background:#000;color:#fff;text-align:center;padding:15px;font-size:13px;}
pre{background:#ddd;padding:10px;border-radius:4px;}
</style>
</head>
<body>

<nav>
<a href="#home">Home</a>
<a href="#api">API Docs</a>
<a href="#bulk">Bulk Verification</a>
<a href="#reports">Reports</a>
<a href="index.html">Retail Portal</a>
</nav>

<section id="home">
<h1>FSTL Institutional Portal</h1>
<div class="box">
Secure verification and API access for government, banks, and investors.<br>
Password-protected. Audit-ready. Direct bank settlement.
</div>
</section>

<section id="api">
<h2>API Documentation</h2>
<pre>
POST /verify
{
  agent_id,
  buyer,
  amount,
  bank_ref
}

RESPONSE:
{
  status: VERIFIED,
  verification_code,
  timestamp
}
</pre>

<h3>Live Verification (Simulated API)</h3>
<input id="apiAgent" placeholder="Agent ID">
<input id="apiBuyer" placeholder="Buyer Name">
<input id="apiAmount" placeholder="Amount">
<input id="apiBankRef" placeholder="Bank Reference">
<button onclick="postVerifyAPI()">POST /verify</button>
<div class="box" id="apiResult"></div>
<p style="font-size:12px;color:#555;">Simulation runs entirely client-side. No servers required.</p>
</section>

<section id="bulk">
<h2>Bulk Verification</h2>
<input type="file" id="bulkFile" accept=".csv">
<button onclick="processBulk()">Process Bulk CSV</button>
<div class="box" id="bulkResult"></div>
</section>

<section id="reports">
<h2>Reports & CSV Export</h2>
<button onclick="exportAgentCSV()">Download All Agent Data</button>
<div class="box" id="reportPanel"></div>
</section>

<footer>
© FSTL Institutional Portal • Digital Verification Infrastructure
</footer>

<script>
// === Serverless API Simulation ===
async function simulateAPI(data){
    if(!data.agent_id || !data.buyer || !data.amount || !data.bank_ref){
        return {status:"ERROR", message:"Missing field"};
    }
    const raw=`FSTL|${data.agent_id}|${data.buyer}|${data.amount}|${data.bank_ref}`;
    const hashBuffer = await crypto.subtle.digest('SHA-256', new TextEncoder().encode(raw));
    const hashArray = Array.from(new Uint8Array(hashBuffer));
    const hashHex = hashArray.map(b=>b.toString(16).padStart(2,'0')).join('');
    const verification_code="FSTL-"+hashHex.slice(0,10).toUpperCase();
    const timestamp = new Date().toISOString();
    return {status:"VERIFIED", verification_code, timestamp};
}

// Hook to form
function postVerifyAPI(){
    const agent_id=document.getElementById("apiAgent").value;
    const buyer=document.getElementById("apiBuyer").value;
    const amount=document.getElementById("apiAmount").value;
    const bank_ref=document.getElementById("apiBankRef").value;

    simulateAPI({agent_id,buyer,amount,bank_ref})
    .then(res=>{
        document.getElementById("apiResult").innerHTML=`<pre>${JSON.stringify(res,null,2)}</pre>`;
    });
}

// Dummy CSV / Bulk processing
function processBulk(){
 const f=document.getElementById("bulkFile").files[0];
 if(!f){alert("Select a CSV file"); return;}
 document.getElementById("bulkResult").innerHTML="File processed. Verification codes generated per row (simulation).";
}

// Dummy CSV Export
function exportAgentCSV(){ alert("CSV export simulated for institutional use."); }
</script>
</body>
</html>
